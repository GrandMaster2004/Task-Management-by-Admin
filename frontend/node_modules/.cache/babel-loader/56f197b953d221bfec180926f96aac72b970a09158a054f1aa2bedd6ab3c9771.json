{"ast":null,"code":"\"use client\";import{useState,useEffect}from\"react\";import{Home,Clock,CheckCircle,BarChart3,Users,UserPlus,UserX,Edit,Trash2,Menu,X,LogOut,UserCheck,UserMinus,Sun,Moon,Settings,Mail,PlusCircle}from\"lucide-react\";import{useAuth}from\"../context/AuthContext\";import{useTheme}from\"../context/ThemeContext\";import apiService from\"../services/api\";import TaskModal from\"./TaskModal\";import UserModal from\"./UserModal\";import TaskAssignModal from\"./TaskAssignModal\";// This will now be for \"Assign New Task\"\nimport SubAdminModal from\"./SubAdminModal\";import PermissionModal from\"./PermissionModal\";import EmailModal from\"./EmailModal\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AdminDashboard=()=>{var _user$name;const{user,logout}=useAuth();const{theme,toggleTheme}=useTheme();const[tasks,setTasks]=useState([]);const[users,setUsers]=useState([]);const[loading,setLoading]=useState(true);const[sidebarOpen,setSidebarOpen]=useState(false);const[showUserMenu,setShowUserMenu]=useState(false);const[error,setError]=useState(null);// Modals\nconst[showTaskModal,setShowTaskModal]=useState(false);// For editing existing tasks\nconst[selectedTask,setSelectedTask]=useState(null);const[showUserModal,setShowUserModal]=useState(false);const[selectedUser,setSelectedUser]=useState(null);const[showTaskAssignModal,setShowTaskAssignModal]=useState(false);// For assigning NEW tasks from sidebar\nconst[showSubAdminModal,setShowSubAdminModal]=useState(false);const[subAdminToEdit,setSubAdminToEdit]=useState(null);const[showPermissionModal,setShowPermissionModal]=useState(false);const[userToManagePermissions,setUserToManagePermissions]=useState(null);const[showEmailModal,setShowEmailModal]=useState(false);const[usersToEmail,setUsersToEmail]=useState([]);// View states\nconst[activeView,setActiveView]=useState(\"overview\");// overview, manage-tasks, manage-users, unassigned-users\nconst[activeTimeline,setActiveTimeline]=useState(\"all\");// all, today, week, month, completed, pending, assigned, deadline-missed\nuseEffect(()=>{if(user){fetchData();}},[user]);const fetchData=async()=>{setLoading(true);try{const[tasksResponse,usersResponse]=await Promise.all([apiService.getAllTasks(),apiService.getAllUsers()]);if(tasksResponse.success){setTasks(tasksResponse.tasks);}else{setError(tasksResponse.message||\"Failed to fetch tasks\");}if(usersResponse.success){setUsers(usersResponse.users);}else{setError(usersResponse.message||\"Failed to fetch users\");}setError(null);}catch(err){console.error(\"Error fetching data:\",err);setError(err.message||\"An unexpected error occurred.\");}finally{setLoading(false);}};// This function will be used by TaskModal for creating/updating tasks\nconst handleSaveTask=async function(taskData){let taskId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;try{let response;if(taskId){response=await apiService.updateTask(taskId,taskData);}else{response=await apiService.createTask(taskData);}if(response.success&&response.task){if(taskId){setTasks(tasks.map(task=>task._id===taskId?response.task:task));}else{setTasks([...tasks,response.task]);}setShowTaskModal(false);setSelectedTask(null);setError(null);}else{setError(response.message||`Failed to ${taskId?\"update\":\"create\"} task`);}}catch(err){setError(err.message);}};// This function will be used by TaskAssignModal for creating and assigning NEW tasks\nconst handleCreateAndAssignTask=async taskData=>{try{const response=await apiService.createTask(taskData);// createTask now handles assignment\nif(response.success&&response.task){setTasks([...tasks,response.task]);setShowTaskAssignModal(false);setError(null);}else{setError(response.message||\"Failed to create and assign task\");}}catch(err){setError(err.message);}};const handleDeleteTask=async taskId=>{if(window.confirm(\"Are you sure you want to delete this task?\")){try{const response=await apiService.deleteTask(taskId);if(response.success){setTasks(tasks.filter(task=>task._id!==taskId));setShowTaskModal(false);setSelectedTask(null);setError(null);}else{setError(response.message||\"Failed to delete task\");}}catch(err){setError(err.message);}}};const handleCreateUser=async userData=>{try{const response=await apiService.register(userData);if(response.success&&response.user){setUsers([...users,response.user]);setShowUserModal(false);setError(null);}else{setError(response.message||\"Failed to create user\");}}catch(err){setError(err.message);}};const handleUpdateUser=async(userId,userData)=>{try{const response=await apiService.updateUser(userId,userData);if(response.success&&response.user){setUsers(users.map(u=>u._id===userId?response.user:u));setShowUserModal(false);setSelectedUser(null);setError(null);}else{setError(response.message||\"Failed to update user\");}}catch(err){setError(err.message);}};const handleDeleteUser=async userId=>{if(window.confirm(\"Are you sure you want to delete this user?\")){try{const response=await apiService.deleteUser(userId);if(response.success){setUsers(users.filter(u=>u._id!==userId));setShowUserModal(false);setSelectedUser(null);setError(null);}else{setError(response.message||\"Failed to delete user\");}}catch(err){setError(err.message);}}};const handleRemoveTaskAssignment=async taskId=>{if(window.confirm(\"Are you sure you want to unassign this task?\")){try{const response=await apiService.unassignTask(taskId);if(response.success&&response.task){setTasks(tasks.map(task=>task._id===taskId?response.task:task));setError(null);}else{setError(response.message||\"Failed to unassign task\");}}catch(err){setError(err.message);}}};// Modified: handleCreateSubAdmin now promotes an existing user\nconst handlePromoteToSubAdmin=async userId=>{try{const response=await apiService.promoteToSubAdmin(userId);if(response.success&&response.user){setUsers(users.map(u=>u._id===userId?response.user:u));setShowSubAdminModal(false);setError(null);}else{setError(response.message||\"Failed to promote user to sub-admin\");}}catch(err){setError(err.message);}};// New: handle demote sub-admin\nconst handleDemoteSubAdmin=async userId=>{if(window.confirm(\"Are you sure you want to demote this sub-admin to a regular user?\")){try{const response=await apiService.demoteSubAdmin(userId);if(response.success&&response.user){setUsers(users.map(u=>u._id===userId?response.user:u));setError(null);}else{setError(response.message||\"Failed to demote sub-admin\");}}catch(err){setError(err.message);}}};const handleUpdatePermissions=async(userId,permissions)=>{try{const response=await apiService.updateSubAdminPermissions(userId,permissions);if(response.success&&response.user){setUsers(users.map(u=>u._id===userId?response.user:u));setShowPermissionModal(false);setUserToManagePermissions(null);setError(null);}else{setError(response.message||\"Failed to update permissions\");}}catch(err){setError(err.message);}};const handleSendEmail=async(recipients,subject,message)=>{try{const response=await apiService.sendEmail({recipients,subject,message});if(response.success){setError(\"Email sent successfully!\");setShowEmailModal(false);setUsersToEmail([]);}else{setError(response.message||\"Failed to send email\");}}catch(err){setError(err.message||\"An error occurred while sending email.\");}};const handleLogout=()=>{logout();setShowUserMenu(false);};const getStats=()=>{const totalTasks=tasks.length;const completedTasks=tasks.filter(task=>task.completed).length;const pendingTasks=totalTasks-completedTasks;const totalUsers=users.length;const unassignedUsers=users.filter(u=>u.role===\"user\"&&!tasks.some(task=>{var _task$assignedTo;return((_task$assignedTo=task.assignedTo)===null||_task$assignedTo===void 0?void 0:_task$assignedTo._id)===u._id;})).length;return{totalTasks,completedTasks,pendingTasks,totalUsers,unassignedUsers};};const stats=getStats();const getTimelineData=()=>{let filtered=tasks;if(activeTimeline===\"today\"){filtered=tasks.filter(task=>{if(!task.dueDate)return false;return new Date(task.dueDate).toDateString()===new Date().toDateString();});}else if(activeTimeline===\"week\"){filtered=tasks.filter(task=>{if(!task.dueDate)return false;const oneWeek=new Date();oneWeek.setDate(oneWeek.getDate()+7);return new Date(task.dueDate)<=oneWeek;});}else if(activeTimeline===\"month\"){filtered=tasks.filter(task=>{if(!task.dueDate)return false;const oneMonth=new Date();oneMonth.setMonth(oneMonth.getMonth()+1);return new Date(task.dueDate)<=oneMonth;});}else if(activeTimeline===\"completed\"){filtered=tasks.filter(task=>task.completed);}else if(activeTimeline===\"pending\"){filtered=tasks.filter(task=>!task.completed);}else if(activeTimeline===\"assigned\"){filtered=tasks.filter(task=>task.assignedTo);}else if(activeTimeline===\"deadline-missed\"){const now=new Date();filtered=tasks.filter(task=>{if(!task.dueDate)return false;const dueDate=new Date(task.dueDate);return dueDate<now&&!task.completed;});}return filtered;};const handleTimelineClick=type=>{setActiveTimeline(type);};const getFilteredUsers=()=>{if(activeView===\"unassigned-users\"){const assignedUserIds=new Set(tasks.filter(task=>task.assignedTo).map(task=>task.assignedTo._id));return users.filter(u=>u.role===\"user\"&&!assignedUserIds.has(u._id));}return users;};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-32 w-32 border-b-2 border-purple-500 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-300\",children:\"Loading admin dashboard...\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50 dark:bg-gray-900 flex\",children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed top-4 right-4 z-50 bg-red-500 text-white p-4 rounded-lg shadow-lg max-w-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setError(null),className:\"ml-2 text-white hover:text-gray-200\",children:/*#__PURE__*/_jsx(X,{size:16})})]})}),sidebarOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden\",onClick:()=>setSidebarOpen(false)}),/*#__PURE__*/_jsx(\"div\",{className:`fixed lg:static inset-y-0 left-0 z-50 w-64 bg-white dark:bg-gray-800 shadow-sm border-r border-gray-200 dark:border-gray-700 transform ${sidebarOpen?\"translate-x-0\":\"-translate-x-full\"} lg:translate-x-0 transition-transform duration-300 ease-in-out`,children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-bold text-sm\",children:\"T\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xl font-bold text-gray-800 dark:text-gray-100\",children:\"TaskFlow\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSidebarOpen(false),className:\"lg:hidden text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\",children:/*#__PURE__*/_jsx(X,{size:24})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 mb-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-purple-500 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-semibold\",children:user===null||user===void 0?void 0:(_user$name=user.name)===null||_user$name===void 0?void 0:_user$name.charAt(0)})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-800 dark:text-gray-100\",children:user===null||user===void 0?void 0:user.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-purple-500\",children:\"Admin\"})]})]})}),/*#__PURE__*/_jsxs(\"nav\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveView(\"overview\"),className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors ${activeView===\"overview\"?\"bg-purple-50 text-purple-600 dark:bg-purple-900 dark:text-purple-200\":\"text-gray-600 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-700\"}`,children:[/*#__PURE__*/_jsx(Home,{size:20}),/*#__PURE__*/_jsx(\"span\",{children:\"Overview\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveView(\"manage-tasks\"),className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors ${activeView===\"manage-tasks\"?\"bg-purple-50 text-purple-600 dark:bg-purple-900 dark:text-purple-200\":\"text-gray-600 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-700\"}`,children:[/*#__PURE__*/_jsx(BarChart3,{size:20}),/*#__PURE__*/_jsx(\"span\",{children:\"Manage Tasks\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveView(\"manage-users\"),className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors ${activeView===\"manage-users\"?\"bg-purple-50 text-purple-600 dark:bg-purple-900 dark:text-purple-200\":\"text-gray-600 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-700\"}`,children:[/*#__PURE__*/_jsx(Users,{size:20}),/*#__PURE__*/_jsx(\"span\",{children:\"Manage Users\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowTaskAssignModal(true),className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors ${showTaskAssignModal?\"bg-purple-50 text-purple-600 dark:bg-purple-900 dark:text-purple-200\":\"text-gray-600 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-700\"}`,children:[/*#__PURE__*/_jsx(PlusCircle,{size:20}),/*#__PURE__*/_jsx(\"span\",{children:\"Assign New Task\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-8\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:toggleTheme,className:\"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-600 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-700\",children:[theme===\"light\"?/*#__PURE__*/_jsx(Moon,{size:20}):/*#__PURE__*/_jsx(Sun,{size:20}),/*#__PURE__*/_jsx(\"span\",{children:theme===\"light\"?\"Dark Mode\":\"Light Mode\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:handleLogout,className:\"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900\",children:[/*#__PURE__*/_jsx(LogOut,{size:20}),/*#__PURE__*/_jsx(\"span\",{children:\"Logout\"})]})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6 lg:hidden\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSidebarOpen(true),className:\"text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-gray-100\",children:/*#__PURE__*/_jsx(Menu,{size:24})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold text-gray-800 dark:text-gray-100\",children:\"Admin Dashboard\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-6\"})]}),activeView===\"overview\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800 dark:text-gray-100\",children:\"Overview\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{onClick:()=>setActiveView(\"manage-tasks\"),className:\"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 cursor-pointer transition-all hover:shadow-md\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xl font-bold text-gray-800 dark:text-gray-100\",children:stats.totalTasks}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-300\",children:\"Total Tasks\"})]}),/*#__PURE__*/_jsx(BarChart3,{className:\"text-purple-500\",size:20})]})}),/*#__PURE__*/_jsx(\"div\",{onClick:()=>handleTimelineClick(\"pending\"),className:`bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border cursor-pointer transition-all hover:shadow-md ${activeTimeline===\"pending\"?\"border-orange-500 bg-orange-50 dark:bg-orange-900\":\"border-gray-200 dark:border-gray-700\"}`,children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xl font-bold text-orange-600 dark:text-orange-400\",children:stats.pendingTasks}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-300\",children:\"Pending Tasks\"})]}),/*#__PURE__*/_jsx(Clock,{className:\"text-orange-500\",size:20})]})}),/*#__PURE__*/_jsx(\"div\",{onClick:()=>handleTimelineClick(\"completed\"),className:`bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border cursor-pointer transition-all hover:shadow-md ${activeTimeline===\"completed\"?\"border-green-500 bg-green-50 dark:bg-green-900\":\"border-gray-200 dark:border-gray-700\"}`,children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xl font-bold text-green-600 dark:text-green-400\",children:stats.completedTasks}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-300\",children:\"Completed Tasks\"})]}),/*#__PURE__*/_jsx(CheckCircle,{className:\"text-green-500\",size:20})]})}),/*#__PURE__*/_jsx(\"div\",{onClick:()=>setActiveView(\"manage-users\"),className:\"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 cursor-pointer transition-all hover:shadow-md\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xl font-bold text-blue-600 dark:text-blue-400\",children:stats.totalUsers}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-300\",children:\"Total Users\"})]}),/*#__PURE__*/_jsx(Users,{className:\"text-blue-500\",size:20})]})}),/*#__PURE__*/_jsx(\"div\",{onClick:()=>setActiveView(\"unassigned-users\"),className:\"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 cursor-pointer transition-all hover:shadow-md\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xl font-bold text-red-600 dark:text-red-400\",children:stats.unassignedUsers}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-300\",children:\"Unassigned Users\"})]}),/*#__PURE__*/_jsx(UserX,{className:\"text-red-500\",size:20})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-800 dark:text-gray-100\",children:[activeTimeline===\"all\"&&\"All Tasks Timeline\",activeTimeline===\"today\"&&\"Tasks Due Today\",activeTimeline===\"week\"&&\"Tasks Due This Week\",activeTimeline===\"month\"&&\"Tasks Due This Month\",activeTimeline===\"completed\"&&\"Completed Tasks Timeline\",activeTimeline===\"pending\"&&\"Pending Tasks Timeline\",activeTimeline===\"assigned\"&&\"Assigned Tasks Timeline\",activeTimeline===\"deadline-missed\"&&\"Deadline Missed Tasks\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-500 dark:text-gray-400\",children:[getTimelineData().length,\" items\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 max-h-96 overflow-y-auto\",children:[getTimelineData().map((task,index)=>{var _task$assignedTo2;return/*#__PURE__*/_jsxs(\"div\",{onClick:()=>{setSelectedTask(task);setShowTaskModal(true);},className:\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 cursor-pointer transition-colors\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-purple-500 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white text-sm font-semibold\",children:index+1})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-800 dark:text-gray-100\",children:task.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-300\",children:[\"Assigned to: \",((_task$assignedTo2=task.assignedTo)===null||_task$assignedTo2===void 0?void 0:_task$assignedTo2.name)||\"Unassigned\"]}),task.dueDate&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:[\"Due: \",new Date(task.dueDate).toLocaleDateString()]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col space-y-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:`px-2 py-1 rounded-full text-xs font-medium ${task.priority===\"High\"?\"bg-red-100 text-red-600 dark:bg-red-800 dark:text-red-100\":task.priority===\"Medium\"?\"bg-yellow-100 text-yellow-600 dark:bg-yellow-800 dark:text-yellow-100\":\"bg-green-100 text-green-600 dark:bg-green-800 dark:text-green-100\"}`,children:task.priority||\"Low\"}),/*#__PURE__*/_jsx(\"span\",{className:`px-2 py-1 rounded-full text-xs font-medium ${task.completed?\"bg-green-100 text-green-600 dark:bg-green-800 dark:text-green-100\":\"bg-orange-100 text-orange-600 dark:bg-orange-800 dark:text-orange-100\"}`,children:task.completed?\"Completed\":\"Pending\"})]})]},task._id);}),getTimelineData().length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500 dark:text-gray-400\",children:\"No tasks found.\"})]})]})]}),activeView===\"manage-tasks\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between mb-6\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800 dark:text-gray-100\",children:\"Manage Tasks\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0 sm:space-x-4 mb-6\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600 dark:text-gray-300 font-medium\",children:\"Filter Tasks:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2\",children:[[\"all\",\"today\",\"week\",\"month\",\"completed\",\"pending\",\"deadline-missed\"].map(filter=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleTimelineClick(filter),className:`px-3 py-1 rounded-full text-sm transition-colors ${activeTimeline===filter?\"bg-purple-500 text-white\":\"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600\"}`,children:filter.charAt(0).toUpperCase()+filter.slice(1).replace(\"-\",\" \")},filter)),activeTimeline===\"deadline-missed\"&&getTimelineData().length>0&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setUsersToEmail(getTimelineData().map(task=>task.assignedTo).filter(Boolean));setShowEmailModal(true);},className:\"px-3 py-1 rounded-full text-sm transition-colors bg-red-500 text-white hover:bg-red-600 flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(Mail,{size:16}),/*#__PURE__*/_jsx(\"span\",{children:\"Email Users\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4\",children:[activeTimeline===\"deadline-missed\"?\"Deadline Missed Tasks\":\"All Tasks\",\" \",\"(\",getTimelineData().length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3 max-h-96 overflow-y-auto\",children:getTimelineData().length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500 dark:text-gray-400\",children:\"No tasks found.\"}):getTimelineData().map(task=>{var _task$assignedTo3;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-purple-500 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white text-sm font-semibold\",children:task.title.charAt(0)})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-800 dark:text-gray-100\",children:task.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-300\",children:[\"Assigned to: \",((_task$assignedTo3=task.assignedTo)===null||_task$assignedTo3===void 0?void 0:_task$assignedTo3.name)||\"Unassigned\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:[\"Due:\",\" \",task.dueDate?new Date(task.dueDate).toLocaleDateString():\"N/A\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[task.assignedTo&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRemoveTaskAssignment(task._id),className:\"text-orange-500 hover:text-orange-700\",title:\"Unassign Task\",children:/*#__PURE__*/_jsx(UserMinus,{size:18})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedTask(task);setShowTaskModal(true);},className:\"text-blue-500 hover:text-blue-700\",title:\"Edit Task\",children:/*#__PURE__*/_jsx(Edit,{size:18})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteTask(task._id),className:\"text-red-500 hover:text-red-700\",title:\"Delete Task\",children:/*#__PURE__*/_jsx(Trash2,{size:18})})]})]},task._id);})})]})]}),activeView===\"manage-users\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800 dark:text-gray-100\",children:\"Manage Users\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setSelectedUser(null);setShowUserModal(true);},className:\"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(UserPlus,{size:16}),/*#__PURE__*/_jsx(\"span\",{children:\"Add New User\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4\",children:[\"All Users (\",users.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3 max-h-96 overflow-y-auto\",children:users.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500 dark:text-gray-400\",children:\"No users found.\"}):users.map(u=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white text-sm font-semibold\",children:u.name.charAt(0)})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-800 dark:text-gray-100\",children:u.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-300\",children:u.email}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-blue-500\",children:u.role})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[u.role===\"user\"&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSubAdminToEdit(u);// Pass the user object to the modal for promotion\nsetShowSubAdminModal(true);},className:\"text-purple-500 hover:text-purple-700\",title:\"Make Sub-Admin\",children:/*#__PURE__*/_jsx(UserCheck,{size:18})}),u.role===\"subadmin\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDemoteSubAdmin(u._id),className:\"text-orange-500 hover:text-orange-700\",title:\"Demote Sub-Admin\",children:/*#__PURE__*/_jsx(UserMinus,{size:18})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setUserToManagePermissions(u);setShowPermissionModal(true);},className:\"text-yellow-500 hover:text-yellow-700\",title:\"Manage Permissions\",children:/*#__PURE__*/_jsx(Settings,{size:18})})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedUser(u);setShowUserModal(true);},className:\"text-blue-500 hover:text-blue-700\",title:\"Edit User\",children:/*#__PURE__*/_jsx(Edit,{size:18})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteUser(u._id),className:\"text-red-500 hover:text-red-700\",title:\"Delete User\",children:/*#__PURE__*/_jsx(Trash2,{size:18})})]})]},u._id))})]})]}),activeView===\"unassigned-users\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800 dark:text-gray-100\",children:\"Unassigned Users\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4\",children:[\"Users Without Assigned Tasks (\",getFilteredUsers().length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3 max-h-96 overflow-y-auto\",children:getFilteredUsers().length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8 text-gray-500 dark:text-gray-400\",children:\"All users have tasks assigned!\"}):getFilteredUsers().map(u=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white text-sm font-semibold\",children:u.name.charAt(0)})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-800 dark:text-gray-100\",children:u.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-300\",children:u.email})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedUser(u);setShowUserModal(true);},className:\"text-blue-500 hover:text-blue-700\",title:\"Edit User\",children:/*#__PURE__*/_jsx(Edit,{size:18})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteUser(u._id),className:\"text-red-500 hover:text-red-700\",title:\"Delete User\",children:/*#__PURE__*/_jsx(Trash2,{size:18})})]})]},u._id))})]})]})]}),showTaskModal&&/*#__PURE__*/_jsx(TaskModal,{task:selectedTask,onClose:()=>{setShowTaskModal(false);setSelectedTask(null);},onSave:handleSaveTask// Use the unified save handler\n,onDelete:selectedTask?()=>handleDeleteTask(selectedTask._id):undefined,users:users.filter(u=>u.role===\"user\")// Only allow assigning to regular users\n}),showTaskAssignModal&&/*#__PURE__*/_jsx(TaskAssignModal,{task:null// Always null for new task creation\n,users:users.filter(u=>u.role===\"user\")// Only allow assigning to regular users\n,onClose:()=>{setShowTaskAssignModal(false);},onAssign:handleCreateAndAssignTask// Use the new create and assign handler\n}),showUserModal&&/*#__PURE__*/_jsx(UserModal,{user:selectedUser,onClose:()=>{setShowUserModal(false);setSelectedUser(null);},onSave:selectedUser?handleUpdateUser:handleCreateUser,onDelete:selectedUser?()=>handleDeleteUser(selectedUser._id):undefined}),showSubAdminModal&&/*#__PURE__*/_jsx(SubAdminModal,{userToPromote:subAdminToEdit// Pass the user object for promotion/editing\n,users:users.filter(u=>u.role===\"user\")// Only show regular users for promotion\n,onClose:()=>{setShowSubAdminModal(false);setSubAdminToEdit(null);},onPromote:handlePromoteToSubAdmin,onUpdate:handleUpdateUser// Re-use update user for sub-admin details\n}),showPermissionModal&&userToManagePermissions&&/*#__PURE__*/_jsx(PermissionModal,{subAdmin:userToManagePermissions,users:users.filter(u=>u.role===\"user\")// Pass all regular users for specific permissions\n,onClose:()=>{setShowPermissionModal(false);setUserToManagePermissions(null);},onSave:handleUpdatePermissions}),showEmailModal&&/*#__PURE__*/_jsx(EmailModal,{recipients:usersToEmail,onClose:()=>setShowEmailModal(false),onSend:handleSendEmail})]});};export default AdminDashboard;","map":{"version":3,"names":["useState","useEffect","Home","Clock","CheckCircle","BarChart3","Users","UserPlus","UserX","Edit","Trash2","Menu","X","LogOut","UserCheck","UserMinus","Sun","Moon","Settings","Mail","PlusCircle","useAuth","useTheme","apiService","TaskModal","UserModal","TaskAssignModal","SubAdminModal","PermissionModal","EmailModal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AdminDashboard","_user$name","user","logout","theme","toggleTheme","tasks","setTasks","users","setUsers","loading","setLoading","sidebarOpen","setSidebarOpen","showUserMenu","setShowUserMenu","error","setError","showTaskModal","setShowTaskModal","selectedTask","setSelectedTask","showUserModal","setShowUserModal","selectedUser","setSelectedUser","showTaskAssignModal","setShowTaskAssignModal","showSubAdminModal","setShowSubAdminModal","subAdminToEdit","setSubAdminToEdit","showPermissionModal","setShowPermissionModal","userToManagePermissions","setUserToManagePermissions","showEmailModal","setShowEmailModal","usersToEmail","setUsersToEmail","activeView","setActiveView","activeTimeline","setActiveTimeline","fetchData","tasksResponse","usersResponse","Promise","all","getAllTasks","getAllUsers","success","message","err","console","handleSaveTask","taskData","taskId","arguments","length","undefined","response","updateTask","createTask","task","map","_id","handleCreateAndAssignTask","handleDeleteTask","window","confirm","deleteTask","filter","handleCreateUser","userData","register","handleUpdateUser","userId","updateUser","u","handleDeleteUser","deleteUser","handleRemoveTaskAssignment","unassignTask","handlePromoteToSubAdmin","promoteToSubAdmin","handleDemoteSubAdmin","demoteSubAdmin","handleUpdatePermissions","permissions","updateSubAdminPermissions","handleSendEmail","recipients","subject","sendEmail","handleLogout","getStats","totalTasks","completedTasks","completed","pendingTasks","totalUsers","unassignedUsers","role","some","_task$assignedTo","assignedTo","stats","getTimelineData","filtered","dueDate","Date","toDateString","oneWeek","setDate","getDate","oneMonth","setMonth","getMonth","now","handleTimelineClick","type","getFilteredUsers","assignedUserIds","Set","has","className","children","onClick","size","name","charAt","index","_task$assignedTo2","title","toLocaleDateString","priority","toUpperCase","slice","replace","Boolean","_task$assignedTo3","email","onClose","onSave","onDelete","onAssign","userToPromote","onPromote","onUpdate","subAdmin","onSend"],"sources":["C:/Users/gondy/OneDrive/Desktop/taskflow-frontend/frontend/src/components/AdminDashboard.jsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport {\n  Home,\n  Clock,\n  CheckCircle,\n  BarChart3,\n  Users,\n  UserPlus,\n  UserX,\n  Edit,\n  Trash2,\n  Menu,\n  X,\n  LogOut,\n  UserCheck,\n  UserMinus,\n  Sun,\n  Moon,\n  Settings,\n  Mail,\n  PlusCircle,\n} from \"lucide-react\";\nimport { useAuth } from \"../context/AuthContext\";\nimport { useTheme } from \"../context/ThemeContext\";\nimport apiService from \"../services/api\";\nimport TaskModal from \"./TaskModal\";\nimport UserModal from \"./UserModal\";\nimport TaskAssignModal from \"./TaskAssignModal\"; // This will now be for \"Assign New Task\"\nimport SubAdminModal from \"./SubAdminModal\";\nimport PermissionModal from \"./PermissionModal\";\nimport EmailModal from \"./EmailModal\";\n\nconst AdminDashboard = () => {\n  const { user, logout } = useAuth();\n  const { theme, toggleTheme } = useTheme();\n  const [tasks, setTasks] = useState([]);\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n  const [showUserMenu, setShowUserMenu] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Modals\n  const [showTaskModal, setShowTaskModal] = useState(false); // For editing existing tasks\n  const [selectedTask, setSelectedTask] = useState(null);\n  const [showUserModal, setShowUserModal] = useState(false);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [showTaskAssignModal, setShowTaskAssignModal] = useState(false); // For assigning NEW tasks from sidebar\n  const [showSubAdminModal, setShowSubAdminModal] = useState(false);\n  const [subAdminToEdit, setSubAdminToEdit] = useState(null);\n  const [showPermissionModal, setShowPermissionModal] = useState(false);\n  const [userToManagePermissions, setUserToManagePermissions] = useState(null);\n  const [showEmailModal, setShowEmailModal] = useState(false);\n  const [usersToEmail, setUsersToEmail] = useState([]);\n\n  // View states\n  const [activeView, setActiveView] = useState(\"overview\"); // overview, manage-tasks, manage-users, unassigned-users\n  const [activeTimeline, setActiveTimeline] = useState(\"all\"); // all, today, week, month, completed, pending, assigned, deadline-missed\n\n  useEffect(() => {\n    if (user) {\n      fetchData();\n    }\n  }, [user]);\n\n  const fetchData = async () => {\n    setLoading(true);\n    try {\n      const [tasksResponse, usersResponse] = await Promise.all([\n        apiService.getAllTasks(),\n        apiService.getAllUsers(),\n      ]);\n\n      if (tasksResponse.success) {\n        setTasks(tasksResponse.tasks);\n      } else {\n        setError(tasksResponse.message || \"Failed to fetch tasks\");\n      }\n\n      if (usersResponse.success) {\n        setUsers(usersResponse.users);\n      } else {\n        setError(usersResponse.message || \"Failed to fetch users\");\n      }\n      setError(null);\n    } catch (err) {\n      console.error(\"Error fetching data:\", err);\n      setError(err.message || \"An unexpected error occurred.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // This function will be used by TaskModal for creating/updating tasks\n  const handleSaveTask = async (taskData, taskId = null) => {\n    try {\n      let response;\n      if (taskId) {\n        response = await apiService.updateTask(taskId, taskData);\n      } else {\n        response = await apiService.createTask(taskData);\n      }\n\n      if (response.success && response.task) {\n        if (taskId) {\n          setTasks(\n            tasks.map((task) => (task._id === taskId ? response.task : task))\n          );\n        } else {\n          setTasks([...tasks, response.task]);\n        }\n        setShowTaskModal(false);\n        setSelectedTask(null);\n        setError(null);\n      } else {\n        setError(\n          response.message || `Failed to ${taskId ? \"update\" : \"create\"} task`\n        );\n      }\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  // This function will be used by TaskAssignModal for creating and assigning NEW tasks\n  const handleCreateAndAssignTask = async (taskData) => {\n    try {\n      const response = await apiService.createTask(taskData); // createTask now handles assignment\n      if (response.success && response.task) {\n        setTasks([...tasks, response.task]);\n        setShowTaskAssignModal(false);\n        setError(null);\n      } else {\n        setError(response.message || \"Failed to create and assign task\");\n      }\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  const handleDeleteTask = async (taskId) => {\n    if (window.confirm(\"Are you sure you want to delete this task?\")) {\n      try {\n        const response = await apiService.deleteTask(taskId);\n        if (response.success) {\n          setTasks(tasks.filter((task) => task._id !== taskId));\n          setShowTaskModal(false);\n          setSelectedTask(null);\n          setError(null);\n        } else {\n          setError(response.message || \"Failed to delete task\");\n        }\n      } catch (err) {\n        setError(err.message);\n      }\n    }\n  };\n\n  const handleCreateUser = async (userData) => {\n    try {\n      const response = await apiService.register(userData);\n      if (response.success && response.user) {\n        setUsers([...users, response.user]);\n        setShowUserModal(false);\n        setError(null);\n      } else {\n        setError(response.message || \"Failed to create user\");\n      }\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  const handleUpdateUser = async (userId, userData) => {\n    try {\n      const response = await apiService.updateUser(userId, userData);\n      if (response.success && response.user) {\n        setUsers(users.map((u) => (u._id === userId ? response.user : u)));\n        setShowUserModal(false);\n        setSelectedUser(null);\n        setError(null);\n      } else {\n        setError(response.message || \"Failed to update user\");\n      }\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  const handleDeleteUser = async (userId) => {\n    if (window.confirm(\"Are you sure you want to delete this user?\")) {\n      try {\n        const response = await apiService.deleteUser(userId);\n        if (response.success) {\n          setUsers(users.filter((u) => u._id !== userId));\n          setShowUserModal(false);\n          setSelectedUser(null);\n          setError(null);\n        } else {\n          setError(response.message || \"Failed to delete user\");\n        }\n      } catch (err) {\n        setError(err.message);\n      }\n    }\n  };\n\n  const handleRemoveTaskAssignment = async (taskId) => {\n    if (window.confirm(\"Are you sure you want to unassign this task?\")) {\n      try {\n        const response = await apiService.unassignTask(taskId);\n        if (response.success && response.task) {\n          setTasks(\n            tasks.map((task) => (task._id === taskId ? response.task : task))\n          );\n          setError(null);\n        } else {\n          setError(response.message || \"Failed to unassign task\");\n        }\n      } catch (err) {\n        setError(err.message);\n      }\n    }\n  };\n\n  // Modified: handleCreateSubAdmin now promotes an existing user\n  const handlePromoteToSubAdmin = async (userId) => {\n    try {\n      const response = await apiService.promoteToSubAdmin(userId);\n      if (response.success && response.user) {\n        setUsers(users.map((u) => (u._id === userId ? response.user : u)));\n        setShowSubAdminModal(false);\n        setError(null);\n      } else {\n        setError(response.message || \"Failed to promote user to sub-admin\");\n      }\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  // New: handle demote sub-admin\n  const handleDemoteSubAdmin = async (userId) => {\n    if (\n      window.confirm(\n        \"Are you sure you want to demote this sub-admin to a regular user?\"\n      )\n    ) {\n      try {\n        const response = await apiService.demoteSubAdmin(userId);\n        if (response.success && response.user) {\n          setUsers(users.map((u) => (u._id === userId ? response.user : u)));\n          setError(null);\n        } else {\n          setError(response.message || \"Failed to demote sub-admin\");\n        }\n      } catch (err) {\n        setError(err.message);\n      }\n    }\n  };\n\n  const handleUpdatePermissions = async (userId, permissions) => {\n    try {\n      const response = await apiService.updateSubAdminPermissions(\n        userId,\n        permissions\n      );\n      if (response.success && response.user) {\n        setUsers(users.map((u) => (u._id === userId ? response.user : u)));\n        setShowPermissionModal(false);\n        setUserToManagePermissions(null);\n        setError(null);\n      } else {\n        setError(response.message || \"Failed to update permissions\");\n      }\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  const handleSendEmail = async (recipients, subject, message) => {\n    try {\n      const response = await apiService.sendEmail({\n        recipients,\n        subject,\n        message,\n      });\n      if (response.success) {\n        setError(\"Email sent successfully!\");\n        setShowEmailModal(false);\n        setUsersToEmail([]);\n      } else {\n        setError(response.message || \"Failed to send email\");\n      }\n    } catch (err) {\n      setError(err.message || \"An error occurred while sending email.\");\n    }\n  };\n\n  const handleLogout = () => {\n    logout();\n    setShowUserMenu(false);\n  };\n\n  const getStats = () => {\n    const totalTasks = tasks.length;\n    const completedTasks = tasks.filter((task) => task.completed).length;\n    const pendingTasks = totalTasks - completedTasks;\n    const totalUsers = users.length;\n    const unassignedUsers = users.filter(\n      (u) =>\n        u.role === \"user\" &&\n        !tasks.some((task) => task.assignedTo?._id === u._id)\n    ).length;\n\n    return {\n      totalTasks,\n      completedTasks,\n      pendingTasks,\n      totalUsers,\n      unassignedUsers,\n    };\n  };\n\n  const stats = getStats();\n\n  const getTimelineData = () => {\n    let filtered = tasks;\n\n    if (activeTimeline === \"today\") {\n      filtered = tasks.filter((task) => {\n        if (!task.dueDate) return false;\n        return (\n          new Date(task.dueDate).toDateString() === new Date().toDateString()\n        );\n      });\n    } else if (activeTimeline === \"week\") {\n      filtered = tasks.filter((task) => {\n        if (!task.dueDate) return false;\n        const oneWeek = new Date();\n        oneWeek.setDate(oneWeek.getDate() + 7);\n        return new Date(task.dueDate) <= oneWeek;\n      });\n    } else if (activeTimeline === \"month\") {\n      filtered = tasks.filter((task) => {\n        if (!task.dueDate) return false;\n        const oneMonth = new Date();\n        oneMonth.setMonth(oneMonth.getMonth() + 1);\n        return new Date(task.dueDate) <= oneMonth;\n      });\n    } else if (activeTimeline === \"completed\") {\n      filtered = tasks.filter((task) => task.completed);\n    } else if (activeTimeline === \"pending\") {\n      filtered = tasks.filter((task) => !task.completed);\n    } else if (activeTimeline === \"assigned\") {\n      filtered = tasks.filter((task) => task.assignedTo);\n    } else if (activeTimeline === \"deadline-missed\") {\n      const now = new Date();\n      filtered = tasks.filter((task) => {\n        if (!task.dueDate) return false;\n        const dueDate = new Date(task.dueDate);\n        return dueDate < now && !task.completed;\n      });\n    }\n\n    return filtered;\n  };\n\n  const handleTimelineClick = (type) => {\n    setActiveTimeline(type);\n  };\n\n  const getFilteredUsers = () => {\n    if (activeView === \"unassigned-users\") {\n      const assignedUserIds = new Set(\n        tasks\n          .filter((task) => task.assignedTo)\n          .map((task) => task.assignedTo._id)\n      );\n      return users.filter(\n        (u) => u.role === \"user\" && !assignedUserIds.has(u._id)\n      );\n    }\n    return users;\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-purple-500 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600 dark:text-gray-300\">\n            Loading admin dashboard...\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 flex\">\n      {/* Error Notification */}\n      {error && (\n        <div className=\"fixed top-4 right-4 z-50 bg-red-500 text-white p-4 rounded-lg shadow-lg max-w-sm\">\n          <div className=\"flex items-center justify-between\">\n            <span className=\"text-sm\">{error}</span>\n            <button\n              onClick={() => setError(null)}\n              className=\"ml-2 text-white hover:text-gray-200\"\n            >\n              <X size={16} />\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Mobile Sidebar Overlay */}\n      {sidebarOpen && (\n        <div\n          className=\"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden\"\n          onClick={() => setSidebarOpen(false)}\n        />\n      )}\n\n      {/* Sidebar */}\n      <div\n        className={`fixed lg:static inset-y-0 left-0 z-50 w-64 bg-white dark:bg-gray-800 shadow-sm border-r border-gray-200 dark:border-gray-700 transform ${\n          sidebarOpen ? \"translate-x-0\" : \"-translate-x-full\"\n        } lg:translate-x-0 transition-transform duration-300 ease-in-out`}\n      >\n        <div className=\"p-6\">\n          <div className=\"flex items-center justify-between mb-8\">\n            <div className=\"flex items-center space-x-2\">\n              <div className=\"w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg flex items-center justify-center\">\n                <span className=\"text-white font-bold text-sm\">T</span>\n              </div>\n              <span className=\"text-xl font-bold text-gray-800 dark:text-gray-100\">\n                TaskFlow\n              </span>\n            </div>\n            <button\n              onClick={() => setSidebarOpen(false)}\n              className=\"lg:hidden text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\"\n            >\n              <X size={24} />\n            </button>\n          </div>\n\n          <div className=\"mb-6\">\n            <div className=\"flex items-center space-x-3 mb-2\">\n              <div className=\"w-10 h-10 bg-purple-500 rounded-full flex items-center justify-center\">\n                <span className=\"text-white font-semibold\">\n                  {user?.name?.charAt(0)}\n                </span>\n              </div>\n              <div>\n                <p className=\"font-medium text-gray-800 dark:text-gray-100\">\n                  {user?.name}\n                </p>\n                <p className=\"text-sm text-purple-500\">Admin</p>\n              </div>\n            </div>\n          </div>\n\n          <nav className=\"space-y-2\">\n            <button\n              onClick={() => setActiveView(\"overview\")}\n              className={`w-full flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors ${\n                activeView === \"overview\"\n                  ? \"bg-purple-50 text-purple-600 dark:bg-purple-900 dark:text-purple-200\"\n                  : \"text-gray-600 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-700\"\n              }`}\n            >\n              <Home size={20} />\n              <span>Overview</span>\n            </button>\n            <button\n              onClick={() => setActiveView(\"manage-tasks\")}\n              className={`w-full flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors ${\n                activeView === \"manage-tasks\"\n                  ? \"bg-purple-50 text-purple-600 dark:bg-purple-900 dark:text-purple-200\"\n                  : \"text-gray-600 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-700\"\n              }`}\n            >\n              <BarChart3 size={20} />\n              <span>Manage Tasks</span>\n            </button>\n            <button\n              onClick={() => setActiveView(\"manage-users\")}\n              className={`w-full flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors ${\n                activeView === \"manage-users\"\n                  ? \"bg-purple-50 text-purple-600 dark:bg-purple-900 dark:text-purple-200\"\n                  : \"text-gray-600 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-700\"\n              }`}\n            >\n              <Users size={20} />\n              <span>Manage Users</span>\n            </button>\n            {/* New: Assign New Task button in sidebar */}\n            <button\n              onClick={() => setShowTaskAssignModal(true)}\n              className={`w-full flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors ${\n                showTaskAssignModal\n                  ? \"bg-purple-50 text-purple-600 dark:bg-purple-900 dark:text-purple-200\"\n                  : \"text-gray-600 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-700\"\n              }`}\n            >\n              <PlusCircle size={20} />\n              <span>Assign New Task</span>\n            </button>\n          </nav>\n\n          <div className=\"mt-8\">\n            <button\n              onClick={toggleTheme}\n              className=\"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-600 hover:bg-gray-50 dark:text-gray-300 dark:hover:bg-gray-700\"\n            >\n              {theme === \"light\" ? <Moon size={20} /> : <Sun size={20} />}\n              <span>{theme === \"light\" ? \"Dark Mode\" : \"Light Mode\"}</span>\n            </button>\n          </div>\n\n          <div className=\"mt-2\">\n            <button\n              onClick={handleLogout}\n              className=\"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900\"\n            >\n              <LogOut size={20} />\n              <span>Logout</span>\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"flex-1 p-6\">\n        {/* Mobile Header */}\n        <div className=\"flex items-center justify-between mb-6 lg:hidden\">\n          <button\n            onClick={() => setSidebarOpen(true)}\n            className=\"text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-gray-100\"\n          >\n            <Menu size={24} />\n          </button>\n          <h1 className=\"text-xl font-bold text-gray-800 dark:text-gray-100\">\n            Admin Dashboard\n          </h1>\n          <div className=\"w-6\"></div>\n        </div>\n\n        {/* Overview Content */}\n        {activeView === \"overview\" && (\n          <div className=\"space-y-6\">\n            <h2 className=\"text-2xl font-bold text-gray-800 dark:text-gray-100\">\n              Overview\n            </h2>\n            {/* Stats Cards - Redefined Order */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4\">\n              {/* Total Tasks */}\n              <div\n                onClick={() => setActiveView(\"manage-tasks\")}\n                className=\"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 cursor-pointer transition-all hover:shadow-md\"\n              >\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-xl font-bold text-gray-800 dark:text-gray-100\">\n                      {stats.totalTasks}\n                    </p>\n                    <p className=\"text-sm text-gray-600 dark:text-gray-300\">\n                      Total Tasks\n                    </p>\n                  </div>\n                  <BarChart3 className=\"text-purple-500\" size={20} />\n                </div>\n              </div>\n\n              {/* Pending Tasks */}\n              <div\n                onClick={() => handleTimelineClick(\"pending\")}\n                className={`bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border cursor-pointer transition-all hover:shadow-md ${\n                  activeTimeline === \"pending\"\n                    ? \"border-orange-500 bg-orange-50 dark:bg-orange-900\"\n                    : \"border-gray-200 dark:border-gray-700\"\n                }`}\n              >\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-xl font-bold text-orange-600 dark:text-orange-400\">\n                      {stats.pendingTasks}\n                    </p>\n                    <p className=\"text-sm text-gray-600 dark:text-gray-300\">\n                      Pending Tasks\n                    </p>\n                  </div>\n                  <Clock className=\"text-orange-500\" size={20} />\n                </div>\n              </div>\n\n              {/* Completed Tasks */}\n              <div\n                onClick={() => handleTimelineClick(\"completed\")}\n                className={`bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border cursor-pointer transition-all hover:shadow-md ${\n                  activeTimeline === \"completed\"\n                    ? \"border-green-500 bg-green-50 dark:bg-green-900\"\n                    : \"border-gray-200 dark:border-gray-700\"\n                }`}\n              >\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-xl font-bold text-green-600 dark:text-green-400\">\n                      {stats.completedTasks}\n                    </p>\n                    <p className=\"text-sm text-gray-600 dark:text-gray-300\">\n                      Completed Tasks\n                    </p>\n                  </div>\n                  <CheckCircle className=\"text-green-500\" size={20} />\n                </div>\n              </div>\n\n              {/* Total Users */}\n              <div\n                onClick={() => setActiveView(\"manage-users\")}\n                className=\"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 cursor-pointer transition-all hover:shadow-md\"\n              >\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-xl font-bold text-blue-600 dark:text-blue-400\">\n                      {stats.totalUsers}\n                    </p>\n                    <p className=\"text-sm text-gray-600 dark:text-gray-300\">\n                      Total Users\n                    </p>\n                  </div>\n                  <Users className=\"text-blue-500\" size={20} />\n                </div>\n              </div>\n\n              {/* Unassigned Users */}\n              <div\n                onClick={() => setActiveView(\"unassigned-users\")}\n                className=\"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 cursor-pointer transition-all hover:shadow-md\"\n              >\n                <div className=\"flex items-center justify-between\">\n                  <div>\n                    <p className=\"text-xl font-bold text-red-600 dark:text-red-400\">\n                      {stats.unassignedUsers}\n                    </p>\n                    <p className=\"text-sm text-gray-600 dark:text-gray-300\">\n                      Unassigned Users\n                    </p>\n                  </div>\n                  <UserX className=\"text-red-500\" size={20} />\n                </div>\n              </div>\n            </div>\n\n            {/* Timeline Bar */}\n            <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-semibold text-gray-800 dark:text-gray-100\">\n                  {activeTimeline === \"all\" && \"All Tasks Timeline\"}\n                  {activeTimeline === \"today\" && \"Tasks Due Today\"}\n                  {activeTimeline === \"week\" && \"Tasks Due This Week\"}\n                  {activeTimeline === \"month\" && \"Tasks Due This Month\"}\n                  {activeTimeline === \"completed\" && \"Completed Tasks Timeline\"}\n                  {activeTimeline === \"pending\" && \"Pending Tasks Timeline\"}\n                  {activeTimeline === \"assigned\" && \"Assigned Tasks Timeline\"}\n                  {activeTimeline === \"deadline-missed\" &&\n                    \"Deadline Missed Tasks\"}\n                </h3>\n                <span className=\"text-sm text-gray-500 dark:text-gray-400\">\n                  {getTimelineData().length} items\n                </span>\n              </div>\n\n              <div className=\"space-y-3 max-h-96 overflow-y-auto\">\n                {getTimelineData().map((task, index) => (\n                  <div\n                    key={task._id}\n                    onClick={() => {\n                      setSelectedTask(task);\n                      setShowTaskModal(true);\n                    }}\n                    className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 cursor-pointer transition-colors\"\n                  >\n                    <div className=\"flex items-center space-x-3\">\n                      <div className=\"w-10 h-10 bg-purple-500 rounded-full flex items-center justify-center\">\n                        <span className=\"text-white text-sm font-semibold\">\n                          {index + 1}\n                        </span>\n                      </div>\n                      <div className=\"flex-1\">\n                        <p className=\"font-medium text-gray-800 dark:text-gray-100\">\n                          {task.title}\n                        </p>\n                        <p className=\"text-sm text-gray-600 dark:text-gray-300\">\n                          Assigned to: {task.assignedTo?.name || \"Unassigned\"}\n                        </p>\n                        {task.dueDate && (\n                          <p className=\"text-xs text-gray-500 dark:text-gray-400\">\n                            Due: {new Date(task.dueDate).toLocaleDateString()}\n                          </p>\n                        )}\n                      </div>\n                    </div>\n                    <div className=\"flex flex-col space-y-1\">\n                      <span\n                        className={`px-2 py-1 rounded-full text-xs font-medium ${\n                          task.priority === \"High\"\n                            ? \"bg-red-100 text-red-600 dark:bg-red-800 dark:text-red-100\"\n                            : task.priority === \"Medium\"\n                            ? \"bg-yellow-100 text-yellow-600 dark:bg-yellow-800 dark:text-yellow-100\"\n                            : \"bg-green-100 text-green-600 dark:bg-green-800 dark:text-green-100\"\n                        }`}\n                      >\n                        {task.priority || \"Low\"}\n                      </span>\n                      <span\n                        className={`px-2 py-1 rounded-full text-xs font-medium ${\n                          task.completed\n                            ? \"bg-green-100 text-green-600 dark:bg-green-800 dark:text-green-100\"\n                            : \"bg-orange-100 text-orange-600 dark:bg-orange-800 dark:text-orange-100\"\n                        }`}\n                      >\n                        {task.completed ? \"Completed\" : \"Pending\"}\n                      </span>\n                    </div>\n                  </div>\n                ))}\n                {getTimelineData().length === 0 && (\n                  <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n                    No tasks found.\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Manage Tasks Content */}\n        {activeView === \"manage-tasks\" && (\n          <div className=\"space-y-6\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <h2 className=\"text-2xl font-bold text-gray-800 dark:text-gray-100\">\n                Manage Tasks\n              </h2>\n              {/* Removed \"Add New Task\" button */}\n            </div>\n\n            {/* Filter Tabs for Tasks */}\n            <div className=\"flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0 sm:space-x-4 mb-6\">\n              <span className=\"text-gray-600 dark:text-gray-300 font-medium\">\n                Filter Tasks:\n              </span>\n              <div className=\"flex flex-wrap gap-2\">\n                {[\n                  \"all\",\n                  \"today\",\n                  \"week\",\n                  \"month\",\n                  \"completed\",\n                  \"pending\",\n                  \"deadline-missed\",\n                ].map((filter) => (\n                  <button\n                    key={filter}\n                    onClick={() => handleTimelineClick(filter)}\n                    className={`px-3 py-1 rounded-full text-sm transition-colors ${\n                      activeTimeline === filter\n                        ? \"bg-purple-500 text-white\"\n                        : \"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600\"\n                    }`}\n                  >\n                    {filter.charAt(0).toUpperCase() +\n                      filter.slice(1).replace(\"-\", \" \")}\n                  </button>\n                ))}\n                {activeTimeline === \"deadline-missed\" &&\n                  getTimelineData().length > 0 && (\n                    <button\n                      onClick={() => {\n                        setUsersToEmail(\n                          getTimelineData()\n                            .map((task) => task.assignedTo)\n                            .filter(Boolean)\n                        );\n                        setShowEmailModal(true);\n                      }}\n                      className=\"px-3 py-1 rounded-full text-sm transition-colors bg-red-500 text-white hover:bg-red-600 flex items-center space-x-1\"\n                    >\n                      <Mail size={16} />\n                      <span>Email Users</span>\n                    </button>\n                  )}\n              </div>\n            </div>\n\n            <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\">\n              <h3 className=\"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4\">\n                {activeTimeline === \"deadline-missed\"\n                  ? \"Deadline Missed Tasks\"\n                  : \"All Tasks\"}{\" \"}\n                ({getTimelineData().length})\n              </h3>\n              <div className=\"space-y-3 max-h-96 overflow-y-auto\">\n                {getTimelineData().length === 0 ? (\n                  <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n                    No tasks found.\n                  </div>\n                ) : (\n                  getTimelineData().map((task) => (\n                    <div\n                      key={task._id}\n                      className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors\"\n                    >\n                      <div className=\"flex items-center space-x-3\">\n                        <div className=\"w-10 h-10 bg-purple-500 rounded-full flex items-center justify-center\">\n                          <span className=\"text-white text-sm font-semibold\">\n                            {task.title.charAt(0)}\n                          </span>\n                        </div>\n                        <div>\n                          <p className=\"font-medium text-gray-800 dark:text-gray-100\">\n                            {task.title}\n                          </p>\n                          <p className=\"text-sm text-gray-600 dark:text-gray-300\">\n                            Assigned to: {task.assignedTo?.name || \"Unassigned\"}\n                          </p>\n                          <p className=\"text-xs text-gray-500 dark:text-gray-400\">\n                            Due:{\" \"}\n                            {task.dueDate\n                              ? new Date(task.dueDate).toLocaleDateString()\n                              : \"N/A\"}\n                          </p>\n                        </div>\n                      </div>\n                      <div className=\"flex space-x-2\">\n                        {/* Removed individual \"Assign Task\" button */}\n                        {task.assignedTo && (\n                          <button\n                            onClick={() => handleRemoveTaskAssignment(task._id)}\n                            className=\"text-orange-500 hover:text-orange-700\"\n                            title=\"Unassign Task\"\n                          >\n                            <UserMinus size={18} />\n                          </button>\n                        )}\n                        <button\n                          onClick={() => {\n                            setSelectedTask(task);\n                            setShowTaskModal(true);\n                          }}\n                          className=\"text-blue-500 hover:text-blue-700\"\n                          title=\"Edit Task\"\n                        >\n                          <Edit size={18} />\n                        </button>\n                        <button\n                          onClick={() => handleDeleteTask(task._id)}\n                          className=\"text-red-500 hover:text-red-700\"\n                          title=\"Delete Task\"\n                        >\n                          <Trash2 size={18} />\n                        </button>\n                      </div>\n                    </div>\n                  ))\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Manage Users Content */}\n        {activeView === \"manage-users\" && (\n          <div className=\"space-y-6\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <h2 className=\"text-2xl font-bold text-gray-800 dark:text-gray-100\">\n                Manage Users\n              </h2>\n              <button\n                onClick={() => {\n                  setSelectedUser(null);\n                  setShowUserModal(true);\n                }}\n                className=\"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2\"\n              >\n                <UserPlus size={16} />\n                <span>Add New User</span>\n              </button>\n            </div>\n\n            <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\">\n              <h3 className=\"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4\">\n                All Users ({users.length})\n              </h3>\n              <div className=\"space-y-3 max-h-96 overflow-y-auto\">\n                {users.length === 0 ? (\n                  <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n                    No users found.\n                  </div>\n                ) : (\n                  users.map((u) => (\n                    <div\n                      key={u._id}\n                      className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors\"\n                    >\n                      <div className=\"flex items-center space-x-3\">\n                        <div className=\"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center\">\n                          <span className=\"text-white text-sm font-semibold\">\n                            {u.name.charAt(0)}\n                          </span>\n                        </div>\n                        <div>\n                          <p className=\"font-medium text-gray-800 dark:text-gray-100\">\n                            {u.name}\n                          </p>\n                          <p className=\"text-sm text-gray-600 dark:text-gray-300\">\n                            {u.email}\n                          </p>\n                          <p className=\"text-xs text-blue-500\">{u.role}</p>\n                        </div>\n                      </div>\n                      <div className=\"flex space-x-2\">\n                        {u.role === \"user\" && (\n                          <button\n                            onClick={() => {\n                              setSubAdminToEdit(u); // Pass the user object to the modal for promotion\n                              setShowSubAdminModal(true);\n                            }}\n                            className=\"text-purple-500 hover:text-purple-700\"\n                            title=\"Make Sub-Admin\"\n                          >\n                            <UserCheck size={18} />\n                          </button>\n                        )}\n                        {u.role === \"subadmin\" && (\n                          <>\n                            <button\n                              onClick={() => handleDemoteSubAdmin(u._id)}\n                              className=\"text-orange-500 hover:text-orange-700\"\n                              title=\"Demote Sub-Admin\"\n                            >\n                              <UserMinus size={18} />\n                            </button>\n                            <button\n                              onClick={() => {\n                                setUserToManagePermissions(u);\n                                setShowPermissionModal(true);\n                              }}\n                              className=\"text-yellow-500 hover:text-yellow-700\"\n                              title=\"Manage Permissions\"\n                            >\n                              <Settings size={18} />\n                            </button>\n                          </>\n                        )}\n                        <button\n                          onClick={() => {\n                            setSelectedUser(u);\n                            setShowUserModal(true);\n                          }}\n                          className=\"text-blue-500 hover:text-blue-700\"\n                          title=\"Edit User\"\n                        >\n                          <Edit size={18} />\n                        </button>\n                        <button\n                          onClick={() => handleDeleteUser(u._id)}\n                          className=\"text-red-500 hover:text-red-700\"\n                          title=\"Delete User\"\n                        >\n                          <Trash2 size={18} />\n                        </button>\n                      </div>\n                    </div>\n                  ))\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Unassigned Users Content */}\n        {activeView === \"unassigned-users\" && (\n          <div className=\"space-y-6\">\n            <h2 className=\"text-2xl font-bold text-gray-800 dark:text-gray-100\">\n              Unassigned Users\n            </h2>\n            <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\">\n              <h3 className=\"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4\">\n                Users Without Assigned Tasks ({getFilteredUsers().length})\n              </h3>\n              <div className=\"space-y-3 max-h-96 overflow-y-auto\">\n                {getFilteredUsers().length === 0 ? (\n                  <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n                    All users have tasks assigned!\n                  </div>\n                ) : (\n                  getFilteredUsers().map((u) => (\n                    <div\n                      key={u._id}\n                      className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors\"\n                    >\n                      <div className=\"flex items-center space-x-3\">\n                        <div className=\"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center\">\n                          <span className=\"text-white text-sm font-semibold\">\n                            {u.name.charAt(0)}\n                          </span>\n                        </div>\n                        <div>\n                          <p className=\"font-medium text-gray-800 dark:text-gray-100\">\n                            {u.name}\n                          </p>\n                          <p className=\"text-sm text-gray-600 dark:text-gray-300\">\n                            {u.email}\n                          </p>\n                        </div>\n                      </div>\n                      <div className=\"flex space-x-2\">\n                        <button\n                          onClick={() => {\n                            setSelectedUser(u);\n                            setShowUserModal(true);\n                          }}\n                          className=\"text-blue-500 hover:text-blue-700\"\n                          title=\"Edit User\"\n                        >\n                          <Edit size={18} />\n                        </button>\n                        <button\n                          onClick={() => handleDeleteUser(u._id)}\n                          className=\"text-red-500 hover:text-red-700\"\n                          title=\"Delete User\"\n                        >\n                          <Trash2 size={18} />\n                        </button>\n                      </div>\n                    </div>\n                  ))\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Task Modal (for editing existing tasks) */}\n      {showTaskModal && (\n        <TaskModal\n          task={selectedTask}\n          onClose={() => {\n            setShowTaskModal(false);\n            setSelectedTask(null);\n          }}\n          onSave={handleSaveTask} // Use the unified save handler\n          onDelete={\n            selectedTask ? () => handleDeleteTask(selectedTask._id) : undefined\n          }\n          users={users.filter((u) => u.role === \"user\")} // Only allow assigning to regular users\n        />\n      )}\n\n      {/* Task Assign Modal (for creating and assigning NEW tasks from sidebar) */}\n      {showTaskAssignModal && (\n        <TaskAssignModal\n          task={null} // Always null for new task creation\n          users={users.filter((u) => u.role === \"user\")} // Only allow assigning to regular users\n          onClose={() => {\n            setShowTaskAssignModal(false);\n          }}\n          onAssign={handleCreateAndAssignTask} // Use the new create and assign handler\n        />\n      )}\n\n      {/* User Modal */}\n      {showUserModal && (\n        <UserModal\n          user={selectedUser}\n          onClose={() => {\n            setShowUserModal(false);\n            setSelectedUser(null);\n          }}\n          onSave={selectedUser ? handleUpdateUser : handleCreateUser}\n          onDelete={\n            selectedUser ? () => handleDeleteUser(selectedUser._id) : undefined\n          }\n        />\n      )}\n\n      {/* SubAdmin Modal */}\n      {showSubAdminModal && (\n        <SubAdminModal\n          userToPromote={subAdminToEdit} // Pass the user object for promotion/editing\n          users={users.filter((u) => u.role === \"user\")} // Only show regular users for promotion\n          onClose={() => {\n            setShowSubAdminModal(false);\n            setSubAdminToEdit(null);\n          }}\n          onPromote={handlePromoteToSubAdmin}\n          onUpdate={handleUpdateUser} // Re-use update user for sub-admin details\n        />\n      )}\n\n      {/* Permission Modal */}\n      {showPermissionModal && userToManagePermissions && (\n        <PermissionModal\n          subAdmin={userToManagePermissions}\n          users={users.filter((u) => u.role === \"user\")} // Pass all regular users for specific permissions\n          onClose={() => {\n            setShowPermissionModal(false);\n            setUserToManagePermissions(null);\n          }}\n          onSave={handleUpdatePermissions}\n        />\n      )}\n\n      {/* Email Modal */}\n      {showEmailModal && (\n        <EmailModal\n          recipients={usersToEmail}\n          onClose={() => setShowEmailModal(false)}\n          onSend={handleSendEmail}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default AdminDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}